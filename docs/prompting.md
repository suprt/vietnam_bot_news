## Промпты для Gemini Flash

Этот документ фиксирует договорённости по использованию Gemini Flash для категоризации и суммаризации новостей.

### Общие принципы

- Используем краткие, чётко структурированные промпты.
- Ожидаем предсказуемый, формализованный формат ответа (списки объектов, JSON-подобные структуры).
- Не допускается «творчество» модели в виде изменения протокола ответа без явной необходимости.

---

### Категоризация новостей

**Цель:** отнести каждую новость к одной категории из фиксированного списка.

**Список допустимых категорий:**

- Экономика и бизнес
- Общество
- Право и безопасность
- Технологии и наука
- Здоровье и образ жизни
- Другое / Разное

**Требования к модели:**

- Для каждой новости выбрать ровно одну категорию из списка.
- Не придумывать новые категории.

**Формат входных данных (пример):**

```json
[
  {
    "id": "tuoitre-2024-12-03-12345",
    "title": "Tiêu đề gốc",
    "content": "Полный текст новости..."
  },
  {
    "id": "vnexpress-2024-12-03-777",
    "title": "Một tiêu đề khác",
    "content": "..."
  }
]
```

**Черновик промпта для категоризации:**

> Ты — помощник, который классифицирует новости по заданным категориям.  
> Тебе будет передан список новостей. Каждая новость имеет уникальный идентификатор `id`, заголовок и текст на вьетнамском языке (иногда на английском).  
> Твоя задача — для каждой новости выбрать ровно одну категорию из следующего списка:  
> "Экономика и бизнес", "Общество", "Право и безопасность", "Технологии и наука", "Здоровье и образ жизни", "Другое / Разное".  
> Верни результат в виде списка объектов JSON без дополнительных комментариев. Формат:  
> `[{"id": "<id новости>", "category": "<одна категория из списка>"}, ...]`

---

### Суммаризация новостей

**Цель:** создать краткое русскоязычное резюме новости длиной 1–2 предложения.

**Роль модели:**

- Русскоязычный новостной редактор, который читает оригинальный текст (на вьетнамском или английском) и пишет резюме на русском.

**Требования к summary:**

- Длина: 1–2 предложения.
- Стиль: нейтральный, информативный, без оценочных суждений и кликовбейта.
- Не придумывать факты, которых нет в оригинале.
- Избегать сложного жаргона и чрезмерно длинных конструкций.

**Формат входных данных (пример):**

```json
[
  {
    "id": "tuoitre-2024-12-03-12345",
    "title": "Tiêu đề gốc",
    "content": "Полный текст новости..."
  }
]
```

**Черновик промпта для суммаризации:**

> Ты — русскоязычный редактор новостной ленты.  
> Тебе будет передан список новостей с уникальными идентификаторами `id`, заголовками и полным текстом на вьетнамском (иногда на английском).  
> Для каждой новости сделай краткое резюме на русском языке длиной 1–2 предложения.  
> Используй нейтральный, информативный стиль, без оценочных суждений и кликовбейта. Не придумывай факты, которых нет в тексте.  
> Верни результат в виде списка объектов JSON без дополнительных комментариев. Формат:  
> `[{"id": "<id новости>", "summary_ru": "<краткое резюме на русском>"}, ...]`

---

### Ранкинг новостей (определение актуальности)

**Цель:** оценить актуальность и важность новостей в каждой категории для выбора топ-N.

**Роль модели:**

- Опытный редактор новостной ленты, который оценивает важность и актуальность новостей по их содержанию.

**Требования к оценке:**

- Оценивать по шкале от 0 до 10, где:
  - 10 — очень важная и актуальная новость (значимые события, срочные новости)
  - 7-9 — важная новость (интересная, но не критическая)
  - 4-6 — обычная новость (информативная, но не приоритетная)
  - 1-3 — маловажная новость (локальные события, менее значимые темы)
  - 0 — неактуальная или неинформативная новость
- Учитывать: значимость события, актуальность темы, общественный интерес, новизну информации.
- Не оценивать по заголовку — важно учитывать содержание статьи.

**Формат входных данных (пример):**

```json
[
  {
    "id": "tuoitre-2024-12-03-12345",
    "category": "Политика",
    "title": "Tiêu đề gốc",
    "content": "Полный текст новости...",
    "published_at": "2024-12-03T05:30:00+07:00",
    "source": "tuoitre"
  }
]
```

**Черновик промпта для ранкинга:**

> Ты — опытный редактор новостной ленты, который оценивает актуальность и важность новостей.  
> Тебе будет передан список новостей из одной категории с уникальными идентификаторами `id`, заголовками, полным текстом, датой публикации и источником на вьетнамском языке (иногда на английском).  
> Для каждой новости оцени её актуальность и важность по шкале от 0 до 10, где 10 — очень важная и актуальная новость, 0 — неактуальная.  
> Учитывай: значимость события, актуальность темы, общественный интерес, новизну информации.  
> Верни результат в виде списка объектов JSON без дополнительных комментариев. Формат:  
> `[{"id": "<id новости>", "relevance_score": <число от 0 до 10>}, ...]`

---

### Замечания по батчингу

- Для экономии токенов и запросов планируется передавать несколько новостей в одном запросе:
  - батчи по 5–20 новостей (конкретный размер будет подобран экспериментально).
- Внутри промпта важно чётко обозначить формат входных данных:
  - например, массив объектов `{id, title, content}` или потенциально `{id, title, content_snippet}`.
- Ответ должен строго соответствовать ожидаемой JSON-структуре, без лишнего текста.


